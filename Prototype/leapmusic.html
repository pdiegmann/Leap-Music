<html>
<head>
	<script src="js/leap.js"></script>
	<script src="js/timbre.js"></script>
</head>
<body>
	<script>
	  var output = document.getElementById('output');
	  var tone = T("sin").play();
	  var paddingPercentage = 0.10;

	  Leap.loop(function (frame) {
	  	if (frame != undefined) {
	  		var hands = frame.hands;
	  		var interactionBox = frame.interactionBox;
	  		if (interactionBox != undefined && hands != undefined && hands.length > 0) {
	  			var hand = hands[0];
	  			if (hand != undefined) {
	  				var position = hand.palmPosition;
	  				var height = interactionBox.height;
	  				var y = position[1];

	  				y = max(y, height * paddingPercentage); // => 10% of height means the 10 lowest % of room are 'ignored'
	  				y = min(y, height * (1 - paddingPercentage)); // => 10% of height means the 10 heighest % of room are 'ignored'

	  				y = y - (height * paddingPercentage); // move everything 10% down
	  				y = y / (1 - (paddingPercentage * 2)); // stretch the room to reach 1 by dividing by 0.8

	  				y = y + 0.5; // add 0.5 to have y in [0.5, 1.5] to multiply with the 'default' tone and have a range between the 'half' and 'oneandahalf' tone

	  				tone.freq.value = tone * y;
	  			}
	  		}
	  	}
	  });
	</script>
</body>